## 一、规范重点
### 1.Promise 状态
Promise的三个状态分别是`pending`、`fulfilled`和`rejected`。

- `pending`：待定，Promise的初始状态。在此状态下可以**落定（`settled`）** 为 `fulfilled` 或 `rejected` 状态。
- `fulfilled`：兑现（解决），表示执行成功。Promise 被`resolve`后的状态，状态不可再改变，且有一个私有的值`value`。
- `rejected`：拒绝，表示执行失败。Promise 被`reject`后的状态，状态不可再改变，且有一个私有的原因`reason`。

注意：`value`和`reason`也是不可变的，它们包含原始值或对象的不可修改的引用，默认值为`undefined`。

### 2.Then 方法
要求必须提供一个`then`方法来访问当前或最终的`value`或`reason`。

```js
promise.then(onFulfilled, onRejected)
```

1. `then`方法接收两个函数作为参数，且参数可选。
2. 如果可选参数不为函数时会被忽略。
3. 两个函数都是异步执行，会放入事件队列等待下一轮`tick`。
4. 当调用`onFulfilled`函数时，会将当前`Promise`的`value`值作为参数传入。
5. 当调用`onRejected`函数时，会将当前`Promise`的`reason`失败原因作为参数传入。
6. `then`函数的返回值为`Promise`。
7. `then`函数可以被同一个`Promise`多次调用。

### 3.Promise解决过程
`Promise`的解决过程是一个抽象过程，接收一个`Promise`和一个值`x`。  
针对`x`的不同值进行处理以下几种情况：  
1. `x`等于`Promise`  
   抛出`TypeError`错误，拒绝`Promise`。

2. `x`是`Promise`的实例  
   如果`x`处于待定状态，那么`Promise`继续等待直到`x`对象或拒绝，否则根据`x`的状态兑现/拒绝`Promise`。

3. `x`是对象或函数  
   取出`x.then`并调用，调用时将`this`指向`x`。将`then`回调函数中得到的结果`y`传入新的`Promise`解决过程中，递归调用。  
   如果执行报错，则将以对应的失败原因拒绝`Promise`。  
   这种情况就是处理拥有`then()`函数的对象或函数，我们也叫它`thenable`。

4. 如果`x`不是对象或函数  
   以`x`作为值执行`Promise`。